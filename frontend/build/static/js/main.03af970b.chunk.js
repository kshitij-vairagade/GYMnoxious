(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{40:function(e,t,c){},55:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(21),s=c.n(r),o=c(4),i=c(5),l=c(7),j=c(2),d=c(3),u="http://localhost:8000/api",b=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},m=c(0),h=function(e,t){return e.location.pathname===t?{color:"#ff9900"}:{color:"#ffffff"}},O=Object(i.g)((function(e){var t=e.history;return Object(m.jsx)("div",{children:Object(m.jsxs)("ul",{className:"nav nav-tabs bg-secondary",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link",to:"/",style:h(t,"/"),children:"Home"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link",to:"/shop",style:h(t,"/shop"),children:"Gyms"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsxs)(o.b,{className:"nav-link",to:"/cart",style:h(t,"/cart"),children:["Cart"," ",Object(m.jsx)("sup",{children:Object(m.jsx)("small",{className:"cart-badge",children:"undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0})})]})}),b()&&0===b().user.role&&Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link",style:h(t,"/user/dashboard"),to:"/user/dashboard",children:"Dashboard"})}),b()&&1===b().user.role&&Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link",style:h(t,"/admin/dashboard"),to:"/admin/dashboard",children:"Dashboard"})}),!b()&&Object(m.jsxs)(n.Fragment,{children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link",style:h(t,"/signin"),to:"/signin",children:"Signin"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link",style:h(t,"/signup"),to:"/signup",children:"Signup"})})]}),b()&&Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("span",{className:"nav-link",style:{cursor:"pointer",color:"#ffffff"},onClick:function(){return function(e){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("".concat(u,"/signout"),{method:"GET"}).then((function(e){console.log("signout",e)})).catch((function(e){return console.log(e)}))}((function(){t.push("/")}))},children:"Signout"})})]})})})),f=(c(40),function(e){var t=e.title,c=void 0===t?"Title":t,n=e.description,a=void 0===n?"Description":n,r=e.className,s=e.children;return Object(m.jsxs)("div",{children:[Object(m.jsx)(O,{}),Object(m.jsxs)("div",{className:"bg-dark p-5 rounded-lg title",children:[Object(m.jsx)("h2",{children:c}),Object(m.jsx)("p",{className:"lead",children:a})]}),Object(m.jsx)("div",{className:r,children:s})]})}),p=function(){var e=Object(n.useState)({email:"test@gmail.com",password:"test@123",error:"",loading:!1,redirectToReferrer:!1}),t=Object(d.a)(e,2),c=t[0],a=t[1],r=c.email,s=c.password,o=c.loading,b=c.error,h=c.redirectToReferrer,O=function(e){return function(t){a(Object(j.a)(Object(j.a)({},c),{},Object(l.a)({error:!1},e,t.target.value)))}},p=function(e){var t;e.preventDefault(),a(Object(j.a)(Object(j.a)({},c),{},{error:!1,loading:!0})),(t={email:r,password:s},fetch("".concat(u,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))).then((function(e){e.error?a(Object(j.a)(Object(j.a)({},c),{},{error:e.error,loading:!1})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){a(Object(j.a)(Object(j.a)({},c),{},{redirectToReferrer:!0}))}))}))};return Object(m.jsxs)(f,{title:"Signin",description:"Signin to Gymnosious",className:"conatiner col-md-8 offset-md-2",children:[o&&Object(m.jsx)("div",{className:"alert alert-info",children:Object(m.jsx)("h2",{children:"Loading..."})}),Object(m.jsx)("div",{className:"alert alert-danger",style:{display:b?" ":"none"},children:b}),Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Email"}),Object(m.jsx)("input",{onChange:O("email"),type:"email",className:"form-control",value:r})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Pssword"}),Object(m.jsx)("input",{onChange:O("password"),type:"password",className:"form-control",value:s})]}),Object(m.jsx)("button",{onClick:p,className:"btn btn-primary",children:"Submit"})]}),function(){if(h)return Object(m.jsx)(i.a,{to:"/"})}()]})},x=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:""}),t=Object(d.a)(e,2),c=t[0],a=t[1],r=c.name,s=c.email,i=c.password,b=c.success,h=c.error,O=function(e){return function(t){a(Object(j.a)(Object(j.a)({},c),{},Object(l.a)({error:!1},e,t.target.value)))}},p=function(e){var t;e.preventDefault(),a(Object(j.a)(Object(j.a)({},c),{},{error:!1})),(t={name:r,email:s,password:i},fetch("".concat(u,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))).then((function(e){e.error?a(Object(j.a)(Object(j.a)({},c),{},{error:e.error,success:!1})):a(Object(j.a)(Object(j.a)({},c),{},{name:"",email:"",password:"",error:"",success:!0}))}))};return Object(m.jsxs)(f,{title:"Sign up",description:"Signup to Gymnosious",className:"conatiner col-md-8 offset-md-2",children:[Object(m.jsxs)("div",{className:"alert alert-success",style:{display:b?" ":"none"},children:["New account is created. Please ",Object(m.jsx)(o.b,{to:"/signin",children:"Signin"})]}),Object(m.jsx)("div",{className:"alert alert-danger",style:{display:h?" ":"none"},children:h}),Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Name"}),Object(m.jsx)("input",{onChange:O("name"),type:"text",className:"form-control",value:r})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Email"}),Object(m.jsx)("input",{onChange:O("email"),type:"email",className:"form-control",value:s})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Password"}),Object(m.jsx)("input",{onChange:O("password"),type:"password",className:"form-control",value:i})]}),Object(m.jsx)("button",{onClick:p,className:"btn btn-primary",children:"Submit"})]})]})},g=c(11),v=c(29),N=c.n(v),y=function(e){return fetch("".concat(u,"/services?sortBy=").concat(e,"&order=desc&limit=6"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},S=function(){return fetch("".concat(u,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},w=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={limit:t,skip:e,filters:c};return fetch("".concat(u,"/services/by/search"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},C=c(14),k=c.n(C),T=function(e){var t=e.item,c=e.url;return Object(m.jsx)("div",{className:"product-img",children:Object(m.jsx)("img",{src:"".concat(u,"/").concat(c,"/photo/").concat(t._id),alt:t.name,className:"mb-3",style:{maxHeight:"100%",maxWidth:"100%"}})})},A=function(e){var t,c=e.service,a=e.showViewServiceButton,r=void 0===a||a,s=e.showAddToCartButton,l=void 0===s||s,u=e.cartUpdate,b=void 0!==u&&u,h=(e.showRemoveServiceButton,e.setRun),O=void 0===h?function(e){return e}:h,f=e.run,p=void 0===f?void 0:f,x=Object(n.useState)(!1),g=Object(d.a)(x,2),v=g[0],N=g[1],y=Object(n.useState)(c.count),S=Object(d.a)(y,2),w=S[0],C=S[1],A=function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},c=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.push(Object(j.a)(Object(j.a)({},e),{},{count:1})),c=Array.from(new Set(c.map((function(e){return e._id})))).map((function(e){return c.find((function(t){return t._id===e}))})),localStorage.setItem("cart",JSON.stringify(c)),t())}(c,N(!0))},I=function(e){return function(t){O(!p),C(t.target.value<1?1:t.target.value),t.target.value>=1&&function(e,t){var c=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.map((function(n,a){n._id===e&&(c[a].count=t)})),localStorage.setItem("cart",JSON.stringify(c)))}(e,t.target.value)}};return Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header card-header-1",children:c.name}),Object(m.jsxs)("div",{className:"card-body",children:[function(e){if(e)return Object(m.jsx)(i.a,{to:"/cart"})}(v),Object(m.jsx)(T,{item:c,url:"service"}),Object(m.jsxs)("p",{className:"card-p  mt-2",children:[c.description," "]}),Object(m.jsxs)("p",{className:"card-p black-10",children:["\u20b9 ",c.fees]}),Object(m.jsx)("p",{className:"card-p black-10",children:c.city}),Object(m.jsxs)("p",{className:"black-9",children:["Category: ",c.category&&c.category.name]}),Object(m.jsxs)("p",{className:"black-8",children:["Added ",k()(c.createdAt).fromNow()]}),(t=c.quantity,t>0?Object(m.jsx)("span",{className:"badge badge-primarly badge-pill",children:"In Stock"}):Object(m.jsx)("span",{className:"badge badge-primarly badge-pill",children:"Out of Stock"})),Object(m.jsx)("br",{}),function(e){return e&&Object(m.jsx)(o.b,{to:"/service/".concat(c._id),className:"mr-2",children:Object(m.jsx)("button",{className:"btn btn-outline-primary mt-2 mb-2 mr-2 card-btn-1",children:"View Services"})})}(r),function(e){return e&&Object(m.jsx)("button",{onClick:A,className:"btn btn-outline-warning mt-2 mb-2 card-btn-1",children:"Add to Checkout cart"})}(l),function e(t){return e&&Object(m.jsx)("button",{onClick:function(){!function(e){var t=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(c,n){c._id===e&&t.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(t)))}(c._id),O(!p)},className:"btn btn-outline-danger mt-2 mb-2",children:"Remove Service"})}(),function(e){return e&&Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"input-group md-3",children:[Object(m.jsx)("div",{className:"input-group-prepend",children:Object(m.jsx)("span",{className:"input-group-text",children:"Adjust Quantity"})}),Object(m.jsx)("input",{type:"number",className:"form-control",value:w,onChange:I(c._id)})]})})}(b)]})]})},I=function(){var e=Object(n.useState)({categories:[],category:"",search:"",results:[],searched:!1}),t=Object(d.a)(e,2),c=t[0],a=t[1],r=c.categories,s=c.category,o=c.search,i=c.results,b=c.searched;Object(n.useEffect)((function(){S().then((function(e){e.error?console.log(e.error):a(Object(j.a)(Object(j.a)({},e),{},{categories:e}))}))}),[]);var h=function(){o&&function(e){var t=N.a.stringify(e);return console.log(t),fetch("".concat(u,"/services/search?").concat(t),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({search:o||void 0,category:s}).then((function(e){e.error?console.log(e.error):a(Object(j.a)(Object(j.a)({},c),{},{results:e,searched:!0}))}))},O=function(e){e.preventDefault(),h()},f=function(e){return function(t){var n;a(Object(j.a)(Object(j.a)({},c),{},(n={},Object(l.a)(n,e,t.target.value),Object(l.a)(n,"searched",!1),n)))}},p=function(e,t){return e&&t.length>0?"Found ".concat(t.length," services"):e&&t.length<1?"No services found":void 0};return Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"container mb-3",children:Object(m.jsx)("form",{onSubmit:O,children:Object(m.jsxs)("span",{className:"input-group-text",children:[Object(m.jsxs)("div",{className:"input-group input-group-lg",children:[Object(m.jsx)("div",{className:"input-group-prepend",children:Object(m.jsxs)("select",{className:"btn mr-2",onChange:f("category"),children:[Object(m.jsx)("option",{value:"All",children:"All"}),r.map((function(e,t){return Object(m.jsx)("option",{value:e._id,children:e.name},t)}))]})}),Object(m.jsx)("input",{type:"search",className:"form-control",onChange:f("search"),placeholder:"Search by name"})]}),Object(m.jsx)("div",{className:"btn input-group-append",style:{border:"none"},children:Object(m.jsx)("button",{className:"input-group-text",children:"Search"})})]})})}),Object(m.jsx)("div",{className:"container-fluid mb-3",children:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"mt-4 mb-4",children:p(b,e)}),Object(m.jsx)("div",{className:"row",children:e.map((function(e,t){return Object(m.jsx)("div",{className:"col-4 mb-3",children:Object(m.jsx)(A,{service:e},t)},t)}))})]})}(i)})]})},_=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(d.a)(r,2),o=s[0],i=s[1],l=Object(n.useState)(!1),j=Object(d.a)(l,2),u=(j[0],j[1]);return Object(n.useEffect)((function(){y("createdAt").then((function(e){e.error?u(e.error):i(Object(g.a)(e))})),y("sold").then((function(e){e.error?u(e.error):a(e)}))}),[]),Object(m.jsxs)(f,{title:"Welcome to GYMnoxious",display:"center",description:"If you want to be a hit in life, you gotta be fit and fine",className:"container-fluid",children:[Object(m.jsx)(I,{}),Object(m.jsx)("h2",{className:"mb-4",children:"New Gyms"}),Object(m.jsx)("div",{className:"row",children:o.map((function(e,t){return Object(m.jsx)("div",{className:"col-4 mb-3",children:Object(m.jsx)(A,{service:e})},t)}))}),Object(m.jsx)("h2",{className:"mb-4",children:"Best Gyms"}),Object(m.jsx)("div",{className:"row",children:c.map((function(e,t){return Object(m.jsx)("div",{className:"col-4 mb-3",children:Object(m.jsx)(A,{service:e})},t)}))})]})},P=function(e){var t=e.categories,c=e.handleFilters,a=Object(n.useState)([]),r=Object(d.a)(a,2),s=r[0],o=r[1],i=function(e){return function(){var t=s.indexOf(e),n=Object(g.a)(s);-1===t?n.push(e):n.splice(t,1),o(n),c(n)}};return t.map((function(e,t){return Object(m.jsxs)("li",{className:"list-unstyled",children:[Object(m.jsx)("input",{onChange:i(e._id),value:s.indexOf(-1===e._id),type:"checkbox",className:"form-check-input"}),Object(m.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))},R=[{_id:0,name:"Any",array:[]},{_id:1,name:"Rs.1000 to Rs.5000",array:[0,4999]},{_id:2,name:"Rs.5000 to Rs.10000",array:[5e3,1e4]},{_id:3,name:"Rs.10000 to Rs.15000",array:[10001,15e3]},{_id:4,name:"Rs.15000 to Rs.20000",array:[15001,2e4]},{_id:5,name:"More than Rs.20000",array:[20001,1e6]}],E=function(e){var t=e.fees,c=e.handleFilters,a=Object(n.useState)(0),r=Object(d.a)(a,2),s=(r[0],r[1]),o=function(e){c(e.target.value),s(e.target.value)};return t.map((function(e,t){return Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{onChange:o,value:"".concat(e._id),name:e,type:"radio",className:"mr-2 ml-4"}),Object(m.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))},G=function(){var e=Object(n.useState)({filters:{category:[],fees:[]}}),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(d.a)(r,2),o=s[0],i=s[1],l=Object(n.useState)(!1),u=Object(d.a)(l,2),b=(u[0],u[1]),h=Object(n.useState)(6),O=Object(d.a)(h,2),p=O[0],x=(O[1],Object(n.useState)(0)),v=Object(d.a)(x,2),N=v[0],y=v[1],C=Object(n.useState)(0),k=Object(d.a)(C,2),T=k[0],I=k[1],_=Object(n.useState)([]),G=Object(d.a)(_,2),J=G[0],B=G[1],D=function(e){w(N,p,e).then((function(e){e.error?b(e.error):(B(e.data),I(e.size),y(0))}))},F=function(){var e=N+p;w(e,p,c.filters).then((function(t){t.error?b(t.error):(B([].concat(Object(g.a)(J),Object(g.a)(t.data))),I(t.size),y(e))}))};Object(n.useEffect)((function(){S().then((function(e){e.error?b(e.error):i(e)})),D(N,c.filters)}),[]);var z=function(e,t){var n=Object(j.a)({},c);if(n.filters[t]=e,"fees"===t){var r=U(e);n.filters[t]=r}D(c.filters),a(n)},U=function(e){var t=R,c=[];for(var n in t)t[n]._id===parseInt(e)&&(c=t[n].array);return c};return Object(m.jsx)(f,{title:"Shop Page",description:"Purchase the membership of your favorite gym in the city",className:"container-fluid",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-4",children:[Object(m.jsx)("h4",{children:"Filter by Category"}),Object(m.jsx)("ul",{children:Object(m.jsx)(P,{categories:o,handleFilters:function(e){return z(e,"category")}})}),Object(m.jsx)("h4",{children:"Filter by Fees Range"}),Object(m.jsx)("div",{children:Object(m.jsx)(E,{fees:R,handleFilters:function(e){return z(e,"fees")}})})]}),Object(m.jsxs)("div",{className:"col-8",children:[Object(m.jsx)("h2",{className:"md-4",children:"Services"}),Object(m.jsx)("div",{className:"row",children:J.map((function(e,t){return Object(m.jsx)("div",{className:"col-4 md-3",children:Object(m.jsx)(A,{service:e},t)})}))}),Object(m.jsx)("hr",{}),T>0&&T>=p&&Object(m.jsx)("button",{onClick:F,className:"btn btn-warning mb-5",children:"Load More"})]})]})})},J=c(18),B=(c(26),function(e){var t=e.component,c=Object(J.a)(e,["component"]);return Object(m.jsx)(i.b,Object(j.a)(Object(j.a)({},c),{},{render:function(e){return b()&&1===b().user.role?Object(m.jsx)(t,Object(j.a)({},e)):Object(m.jsx)(i.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))}),D=function(e){var t=e.component,c=Object(J.a)(e,["component"]);return Object(m.jsx)(i.b,Object(j.a)(Object(j.a)({},c),{},{render:function(e){return b()?Object(m.jsx)(t,Object(j.a)({},e)):Object(m.jsx)(i.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},F=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],r=b().user,s=r._id,i=r.name,l=r.email,j=r.role,h=b().token,O=function(e,t){(function(e,t){return fetch("".concat(u,"/orders/by/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?console.log(e.error):a(e)}))};Object(n.useEffect)((function(){O(s,h)}),[]);return Object(m.jsx)(f,{title:"Dashboard",description:"G'day ".concat(i,"!"),className:"container-fluid",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-3",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("h4",{className:"card-header",children:"User Links"}),Object(m.jsxs)("ul",{className:"list-group",children:[Object(m.jsx)("li",{className:"list-group-item",children:Object(m.jsx)(o.b,{className:"nav-link",to:"/cart",children:"My Cart"})}),Object(m.jsx)("li",{className:"list-group-item",children:Object(m.jsx)(o.b,{className:"nav-link",to:"/profile/".concat(s),children:"Update Profile"})})]})]})}),Object(m.jsxs)("div",{className:"col-9",children:[Object(m.jsxs)("div",{className:"card mb-5",children:[Object(m.jsx)("h3",{className:"card-header",children:"User Information"}),Object(m.jsxs)("ul",{className:"list-group",children:[Object(m.jsx)("li",{className:"list-group-item",children:i}),Object(m.jsx)("li",{className:"list-group-item",children:l}),Object(m.jsx)("li",{className:"list-group-item",children:1===j?"Admin":"Registered User"})]})]}),function(e){return Object(m.jsxs)("div",{className:"card mb-5",children:[Object(m.jsx)("h3",{className:"card-header",children:"Purchase history"}),Object(m.jsx)("ul",{className:"list-group",children:Object(m.jsx)("li",{className:"list-group-item",children:e.map((function(e,t){return Object(m.jsxs)("div",{children:[Object(m.jsx)("hr",{}),e.services.map((function(e,t){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("h6",{children:["Service name: ",e.name]}),Object(m.jsxs)("h6",{children:["Service price: $",e.price]}),Object(m.jsxs)("h6",{children:["Purchased date:"," ",k()(e.createdAt).fromNow()]})]},t)}))]})}))})})]})}(c)]})]})})},z=function(){var e=b().user,t=(e._id,e.name),c=e.email,n=e.role;return Object(m.jsx)(f,{title:"AdminDashboard",description:"Good Day ".concat(t),className:"container-fluid",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-3",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("h4",{className:"card-header",children:"Admin Links"}),Object(m.jsxs)("ul",{className:"list-group",children:[Object(m.jsx)("li",{className:"list-group-item",children:Object(m.jsx)(o.b,{className:"nav-link",to:"/create/category",children:"Create Category"})}),Object(m.jsx)("li",{className:"list-group-item",children:Object(m.jsx)(o.b,{className:"nav-link",to:"/create/service",children:"Create Service"})}),Object(m.jsx)("li",{className:"list-group-item",children:1===n?"Admin":"Registered User"})]})]})}),Object(m.jsx)("div",{className:"col-9",children:Object(m.jsxs)("div",{className:"card mb-5",children:[Object(m.jsx)("h3",{className:"card-header",children:"User Info "}),Object(m.jsxs)("ul",{className:"list-group",children:[Object(m.jsx)("li",{className:"list-group-item",children:t}),Object(m.jsx)("li",{className:"list-group-item",children:c}),Object(m.jsx)("li",{className:"list-group-item",children:1===n?"Admin":"Registered User"})]})]})})]})})},U=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(d.a)(r,2),i=s[0],l=s[1],j=Object(n.useState)(!1),h=Object(d.a)(j,2),O=h[0],p=h[1],x=b(),g=x.user,v=x.token,N=function(e){l(""),a(e.target.value)},y=function(e){e.preventDefault(),l(""),p(!1),function(e,t,c){return fetch("".concat(u,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(g._id,v,{name:c}).then((function(e){e.error?l(e.error):(l(""),p(!0))}))};return Object(m.jsx)(f,{title:"Add a new category",description:"G'day ".concat(g.name,", ready to add a new category?"),children:Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col-md-8 offset-md-2",children:[function(){if(O)return Object(m.jsxs)("h3",{className:"text-success",children:[c," is created"]})}(),function(){if(i)return Object(m.jsx)("h3",{className:"text-danger",children:"Category should be unique"})}(),Object(m.jsxs)("form",{onSubmit:y,children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Category Name"}),Object(m.jsx)("input",{type:"text",className:"form-control",onChange:N,value:c,autoFocus:!0,required:!0})]}),Object(m.jsx)("button",{className:"btn btn-outline-primary",children:"Create Category"})]}),Object(m.jsx)("div",{className:"mt-5",children:Object(m.jsx)(o.b,{to:"/admin/dashboard",className:"text-warning",children:"Back to Dashboard"})})]})})})},q=function(){var e=Object(n.useState)({name:"",description:"",fees:"",categories:"",category:[],quantity:"",city:"",sold:"",photo:"",loading:!1,error:"",createdService:"",redirectToProfile:!1,formData:""}),t=Object(d.a)(e,2),c=t[0],a=t[1],r=b(),s=r.user,o=r.token,i=c.name,h=c.description,O=c.fees,p=c.categories,x=(c.category,c.quantity),g=c.city,v=c.sold,N=(c.photo,c.loading),y=c.error,S=c.createdService,w=(c.redirectToProfile,c.formData),C=function(){fetch("".concat(u,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?a(Object(j.a)(Object(j.a)({},c),{},{error:e.error})):a(Object(j.a)(Object(j.a)({},c),{},{categories:e,formData:new FormData}))}))};Object(n.useEffect)((function(){C()}),[]);var k=function(e){return function(t){var n="photo"===e?t.target.files[0]:t.target.value;w.set(e,n),a(Object(j.a)(Object(j.a)({},c),{},Object(l.a)({},e,n)))}},T=function(e){e.preventDefault(),a(Object(j.a)(Object(j.a)({},c),{},{error:"",loading:!0})),function(e,t,c){return fetch("".concat(u,"/service/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:c}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(s._id,o,w).then((function(e){e.error?a(Object(j.a)(Object(j.a)({},c),{},{error:e.error})):a(Object(j.a)(Object(j.a)({},c),{},{name:"",description:"",photo:"",fees:"",quantity:"",loading:!1,createdService:e.name}))}))};return Object(m.jsx)(f,{title:"Add a new service",description:"G'day ".concat(s.name,", ready to add a new service?"),children:Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col-md-8 offset-md-2",children:[N&&Object(m.jsx)("div",{className:"alert alert-success",children:Object(m.jsx)("h2",{children:"Loading..."})}),Object(m.jsx)("div",{className:"alert alert-info",style:{display:S?"":"none"},children:Object(m.jsxs)("h2",{children:["".concat(S)," is created!"]})}),Object(m.jsx)("div",{className:"alert alert-danger",style:{display:y?"":"none"},children:y}),Object(m.jsxs)("form",{className:"mb-3",onSubmit:T,children:[Object(m.jsx)("h4",{children:"Post Photo"}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("label",{className:"btn btn-secondary",children:Object(m.jsx)("input",{onChange:k("photo"),type:"file",name:"photo",accept:"image/*"})})}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Name"}),Object(m.jsx)("input",{onChange:k("name"),type:"text",className:"form-control",value:i})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Description"}),Object(m.jsx)("textarea",{onChange:k("description"),className:"form-control",value:h})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Fees"}),Object(m.jsx)("input",{onChange:k("fees"),type:"text",className:"form-control",value:O})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Category"}),Object(m.jsxs)("select",{onChange:k("category"),className:"form-control",children:[Object(m.jsx)("option",{children:"Please select"}),p&&p.map((function(e,t){return Object(m.jsx)("option",{value:e._id,children:e.name},t)}))]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Quantity"}),Object(m.jsx)("input",{onChange:k("quantity"),type:"number",className:"form-control",value:x})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"City"})," ",Object(m.jsx)("input",{onChange:k("city"),type:"text",className:"form-control",value:g})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Sold"}),Object(m.jsx)("input",{onChange:k("sold"),type:"number",className:"form-control",value:v})]}),Object(m.jsx)("button",{className:"btn btn-outline-primary",children:"Create Service"})]})]})})})},M=function(e){var t=Object(n.useState)({}),c=Object(d.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)([]),o=Object(d.a)(s,2),i=o[0],l=o[1],j=Object(n.useState)(!1),b=Object(d.a)(j,2),h=(b[0],b[1]),O=function(e){(function(e){return fetch("".concat(u,"/service/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?h(e.error):(r(e),function(e){return fetch("".concat(u,"/services/related/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e._id).then((function(e){e.error?h(e.error):l(e)})))}))};return Object(n.useEffect)((function(){var t=e.match.params.serviceId;O(t)}),[e]),Object(m.jsx)(f,{title:a&&a.name,description:a&&a.description&&a.description.substring(0,100),className:"container-fluid",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-8",children:a&&a.description&&Object(m.jsx)(A,{service:a,showViewServiceButton:!1})}),Object(m.jsxs)("div",{className:"col-4",children:[Object(m.jsx)("h4",{children:"Related services"}),i.map((function(e,t){return Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(A,{service:e})},t)}))]})]})})},L=c(30),Y=c.n(L),V=function(e){var t=e.services,c=e.setRun,a=void 0===c?function(e){return e}:c,r=e.run,s=void 0===r?void 0:r,i=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{},address:""}),l=Object(d.a)(i,2),h=l[0],O=l[1],f=b()&&b().user._id,p=b()&&b().token,x=function(e,t){(function(e,t){return fetch("".concat(u,"/braintree/getToken/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?(console.log(e.error),O(Object(j.a)(Object(j.a)({},e),{},{error:e.error}))):(console.log(e),O({clientToken:e.clientToken}))}))};Object(n.useEffect)((function(){x(f,p)}),[]);var g,v,N,y=function(e){O(Object(j.a)(Object(j.a)({},h),{},{address:e.target.value}))},S=function(){return t.reduce((function(e,t){return e+t.count*t.price}),0)},w=h.address,C=function(){O({loading:!0});h.instance.requestPaymentMethod().then((function(e){var c={paymentMethodNonce:e.nonce,amount:S()};(function(e,t,c){return fetch("".concat(u,"/braintree/payment/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(f,p,c).then((function(e){console.log(e);var c={services:t,transaction_id:e.transaction.id,amount:e.transaction.amount,address:w};(function(e,t,c){return fetch("".concat(u,"/order/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:c})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(f,p,c).then((function(e){var t;t=function(){a(!s),console.log("payment success and empty cart"),O({loading:!1,success:!0})},"undefined"!==typeof window&&(localStorage.removeItem("cart"),t())})).catch((function(e){console.log(e),O({loading:!1})}))})).catch((function(e){console.log(e),O({loading:!1})}))})).catch((function(e){O(Object(j.a)(Object(j.a)({},h),{},{error:e.message}))}))},k=function(){return Object(m.jsx)("div",{onBlur:function(){return O(Object(j.a)(Object(j.a)({},h),{},{error:""}))},children:null!==h.clientToken&&t.length>0?Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"gorm-group mb-3",children:[Object(m.jsx)("label",{className:"text-muted",children:"Delivery address:"}),Object(m.jsx)("textarea",{onChange:y,className:"form-control",value:h.address,placeholder:"Type your delivery address here..."})]}),Object(m.jsx)(Y.a,{options:{authorization:h.clientToken,paypal:{flow:"vault"}},onInstance:function(e){return h.instance=e}}),Object(m.jsx)("button",{onClick:C,className:"btn btn-success btn-block",children:"Pay"})]}):null})};return Object(m.jsxs)("div",{children:[Object(m.jsxs)("h2",{children:["Total: \u20b9",S()]}),(N=h.loading,N&&Object(m.jsx)("h2",{className:"text-danger",children:"Loading..."})),(v=h.success,Object(m.jsx)("div",{className:"alert alert-info",style:{display:v?"":"none"},children:"Thanks! Your payment was successful!"})),(g=h.error,Object(m.jsx)("div",{className:"alert alert-danger",style:{display:g?"":"none"},children:g})),b()?Object(m.jsx)("div",{children:k()}):Object(m.jsx)(o.b,{to:"/signin",children:Object(m.jsx)("button",{className:"btn btn-primary",children:"Sign in to checkout"})})]})},H=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(d.a)(r,2),i=s[0],l=s[1];Object(n.useEffect)((function(){a("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])}),[i]);return Object(m.jsx)(f,{title:"Gym Cart",description:"Manage your cart items. Add remove checkout or continue Gym.",className:"container-fluid",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-6",children:c.length>0?function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("h2",{children:["Your cart has ","".concat(e.length)," items"]}),Object(m.jsx)("hr",{}),e.map((function(e,t){return Object(m.jsx)(A,{service:e,showAddToCartButton:!1,cartUpdate:!0,showRemoveServiceButton:!0,setRun:l,run:i},t)}))]})}(c):Object(m.jsxs)("h2",{children:["Your cart is empty. ",Object(m.jsx)("br",{})," ",Object(m.jsx)(o.b,{to:"/shop",children:"Continue shopping"})]})}),Object(m.jsxs)("div",{className:"col-6",children:[Object(m.jsx)("h2",{className:"mb-4",children:"Summary"}),Object(m.jsx)("hr",{}),Object(m.jsx)(V,{services:c,setRun:l,run:i})]})]})})},Q=function(e){var t=e.match,c=Object(n.useState)({name:"",email:"",password:"",error:!1,success:!1}),a=Object(d.a)(c,2),r=a[0],s=a[1],o=b().token,h=r.name,O=r.email,p=r.password,x=(r.error,r.success),g=function(e){(function(e,t){return fetch("".concat(u,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,o).then((function(e){e.error?s(Object(j.a)(Object(j.a)({},r),{},{error:!0})):s(Object(j.a)(Object(j.a)({},r),{},{name:e.name,email:e.email}))}))};Object(n.useEffect)((function(){g(t.params.userId)}),[]);var v=function(e){return function(t){s(Object(j.a)(Object(j.a)({},r),{},Object(l.a)({error:!1},e,t.target.value)))}},N=function(e){e.preventDefault(),function(e,t,c){return fetch("".concat(u,"/user/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.userId,o,{name:h,email:O,password:p}).then((function(e){e.error?alert(e.error):function(e,t){if("undefined"!==typeof window&&localStorage.getItem("jwt")){var c=JSON.parse(localStorage.getItem("jwt"));c.user=e,localStorage.setItem("jwt",JSON.stringify(c)),t()}}(e,(function(){s(Object(j.a)(Object(j.a)({},r),{},{name:e.name,email:e.email,success:!0}))}))}))};return Object(m.jsxs)(f,{title:"Profile",description:"Update your profile",className:"container-fluid",children:[Object(m.jsx)("h2",{className:"mb-4",children:"Profile update"}),function(e,t,c){return Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Name"}),Object(m.jsx)("input",{type:"text",onChange:v("name"),className:"form-control",value:e})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Email"}),Object(m.jsx)("input",{type:"email",onChange:v("email"),className:"form-control",value:t})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Password"}),Object(m.jsx)("input",{type:"password",onChange:v("password"),className:"form-control",value:c})]}),Object(m.jsx)("button",{onClick:N,className:"btn btn-primary",children:"Submit"})]})}(h,O,p),function(e){if(e)return Object(m.jsx)(i.a,{to:"/cart"})}(x)]})},W=function(){return Object(m.jsx)(o.a,{children:Object(m.jsxs)(i.d,{children:[Object(m.jsx)(i.b,{path:"/",exact:!0,component:_}),Object(m.jsx)(i.b,{path:"/shop",exact:!0,component:G}),Object(m.jsx)(i.b,{path:"/service/:serviceId",exact:!0,component:M}),Object(m.jsx)(i.b,{path:"/signin",exact:!0,component:p}),Object(m.jsx)(i.b,{path:"/signup",exact:!0,component:x}),Object(m.jsx)(D,{path:"/user/dashboard",exact:!0,component:F}),Object(m.jsx)(B,{path:"/create/category",exact:!0,component:U}),Object(m.jsx)(B,{path:"/create/service",exact:!0,component:q}),Object(m.jsx)(B,{path:"/admin/dashboard",exact:!0,component:z}),Object(m.jsx)(D,{path:"/profile/:userId",exact:!0,component:Q}),Object(m.jsx)(i.b,{path:"/cart",exact:!0,component:H})]})})};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(W,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.03af970b.chunk.js.map